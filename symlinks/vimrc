set nocompatible               " Round here we say Vim, not Vi
filetype off                   " required!

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

" Vundle
Plugin 'gmarik/vundle'

Plugin 'kien/ctrlp.vim'
Plugin 'mileszs/ack.vim'
Plugin 'ervandew/supertab'
Plugin 'tpope/vim-unimpaired'
Plugin 'kchmck/vim-coffee-script'
Plugin 'tpope/vim-commentary'
Plugin 'tpope/vim-surround'
Plugin 'tpope/vim-rails'
Plugin 'nono/vim-handlebars'
Plugin 'rizzatti/dash.vim'
Plugin 'fatih/vim-go'

call vundle#end()

" ================
" Ruby stuff
" ================
syntax on                 " Enable syntax highlighting
filetype plugin indent on " Enable filetype-specific indenting and plugins

augroup myfiletypes
  " Clear old autocmds in group
  autocmd!
  " autoindent with two spaces, always expand tabs
  autocmd FileType ruby,eruby,yaml set ai sw=2 sts=2 et
augroup END
" ================

let mapleader = ","
" Basic config that I cannot live without
set list
set backspace=indent,eol,start  " allow backspacing over everything in insert mode
set history=500                 " keep 500 lines of command line history
set ruler                       " show the cursor position all the time
set showcmd                     " display incomplete commands
set autoindent
set showmatch
set number
set nowrap
set expandtab
set smarttab
set tabstop=2
set shiftwidth=2
set autoread

" List chars show whitespace and do not wrap lines
set listchars=""
set listchars=tab:\ \
set listchars+=trail:.
set listchars+=extends:>
set listchars+=precedes:<

" format the current file
nmap <leader>fef ggVG=``
" equally resize splits
nmap <leader>= <C-w>=

" Qucikly show navigation at the root
nmap <leader>, :e.<CR>
" Back to the last buffer
nmap <leader>b :b#<CR>
nmap <leader>l :ls<CR>
" Reload the vimrc config
nmap <F5> :so $MYVIMRC<CR>
" Resize equally
nmap <leader>= <C-w>=
nmap <leader>s :Ack
nmap <leader>r :CtrlPClearCache<CR>

" Indentation helpers
vmap <D-]> >gv
vmap <D-[> <gv
nmap <A-]> >>
nmap <A-[> <<
omap <D-]> >>
omap <D-[> <<
imap <D-]> <Esc>>>i
imap <D-[> <Esc><<i

" Taking notes are we? Code notes are excluded globally in git
nmap <leader>tn :e notes.scratch.md<CR>
" Remember to sharpen when possible and applicable
nmap <leader>ts :e ~/Dropbox/tool_sharpener.md<CR>
nmap <leader>sl :e ~/Dropbox/solutions_log.md<CR>

" Rspec.vim mappings
map <Leader>t :! bundle exec rspec<CR>
" Strip trailing whitespace
autocmd BufWritePre * :%s/\s\+$//e
